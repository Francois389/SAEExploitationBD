--Pour inserer des dates depuis le format 2015-01-01 00:00:00 il faut utiliser la fonction STR_TO_DATE comme suit:
--STR_TO_DATE(date,'%Y-%m-%d %T')
--rempalcer date par la date a inserer


-- durée d'occupation des salles
SELECT accueil.nom_salle, SUM(creneau.heure_fin - creneau.heure_debut) AS "Temps dans chaque salle"
FROM creneau
INNER JOIN accueil
ON creneau.id_creneau = accueil.id_creneau
GROUP BY accueil.nom_salle
ORDER BY SUM(creneau.heure_fin - creneau.heure_debut) DESC


-- durée d'occupation des salles pour un département donné
SELECT accueil.nom_salle AS "Nom de la salle", SUM(HOUR(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))+(MINUTE(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))/60)) AS TempsEnHeure
FROM creneau
INNER JOIN accueil
ON creneau.id_creneau = accueil.id_creneau
INNER JOIN participer
ON creneau.id_creneau = participer.id_creneau
INNER JOIN groupe
ON participer.nom_groupe = groupe.nom_groupe
WHERE nom_departement = '$Departement'
GROUP BY fdesaintpalais.accueil.nom_salle
ORDER BY TempsEnHeure DESC
-- departement parmis ceux la 
-- Informatique
-- GEA
-- Information communication
-- QLIO
-- Carrieres juridiques
-- Null

-- HOUR(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))+(MINUTE(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))/60)



-- durée d'occupation des salles par département
SELECT accueil.nom_salle, groupe.nom_departement, creneau.heure_fin - creneau.heure_debut
FROM creneau
INNER JOIN accueil
ON creneau.id_creneau = accueil.id_creneau
INNER JOIN participer
ON creneau.id_creneau = participer.id_creneau
INNER JOIN groupe
ON participer.nom_groupe = groupe.nom_groupe


-- charge moyenne hedomadaire pour un groupe donné
-- WEEKDAY
SELECT DAYNAME(creneau.heure_debut) AS JourDeLaSemaine, 
MOY(HOUR(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))+(MINUTE(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))/60)) AS TempsOccupationMoyen
FROM creneau
GROUP BY WEEKDAY(creneau.heure_debut);

SELECT DAYNAME(creneau.heure_debut) AS JourDeLaSemaine, 
AVG(HOUR(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))+(MINUTE(TIMEDIFF(creneau.heure_fin, creneau.heure_debut))/60)) AS TempsOccupationMoyen
FROM salle
JOIN accueil
ON salle.nom_salle = accueil.nom_salle
JOIN creneau
ON creneau.id_creneau = accueil.id_creneau
WHERE salle.nom_salle = 'A100'
GROUP BY WEEKDAY(creneau.heure_debut)