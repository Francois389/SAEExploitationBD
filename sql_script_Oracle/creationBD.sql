--DROP TABLE DEPARTEMENT;
--DROP TABLE CRENEAU;
--DROP TABLE PROFESSEUR;
--DROP TABLE BATIMENT;
--DROP TABLE GROUPE;
--DROP TABLE SALLE;
--DROP TABLE PARTICIPER;
--DROP TABLE ENSEIGNER;

CREATE TABLE DEPARTEMENT (
    nom_departement    VARCHAR(70) NOT NULL        CONSTRAINT pk_departement PRIMARY KEY,
);

CREATE TABLE CRENEAU (
    id_creneau        NUMERIC NOT NULL             CONSTRAINT pk_creneau PRIMARY KEY,
    intitule           VARCHAR(70) NOT NULL,
    heure_debut        DATE NOT NULL,
    heure_fin          DATE NOT NULL
);

CREATE TABLE PROFESSEUR (
    id_professeur     NUMERIC NOT NULL             CONSTRAINT pk_professeur PRIMARY KEY,
    nom_professeur     VARCHAR(50) NOT NULL,
    prenom_professeur  VARCHAR(50) NOT NULL
);

CREATE TABLE BATIMENT (
    nom_batiment      VARCHAR(50) NOT NULL     CONSTRAINT pk_batiment PRIMARY KEY
);

CREATE TABLE GROUPE (
    nom_groupe        VARCHAR(50) NOT NULL     CONSTRAINT pk_groupe PRIMARY KEY,
    annee_etude        NUMERIC(1)  NOT NULL, 
    nom_departement    VARCHAR(6) NOT NULL,
    CONSTRAINT fk_groupe_departement FOREIGN KEY(nom_departement) REFERENCES DEPARTEMENT(nom_departement)
);

CREATE TABLE SALLE (
    nom_salle         VARCHAR(50) NOT NULL     CONSTRAINT pk_salle PRIMARY KEY,
    est_infomatique    VARCHAR(3) NOT NULL      CONSTRAINT fk_salle_infomatique CHECK (est_infomatique IN ('oui', 'non')),
    nom_batiment       VARCHAR(50) NOT NULL,
    CONSTRAINT fk_salle_batiment FOREIGN KEY (nom_batiment) REFERENCES BATIMENT(nom_batiment)
);

CREATE TABLE ACCUEIL (
    id_creneau        NUMERIC NOT NULL,
    nom_salle         VARCHAR(50) NOT NULL,
    CONSTRAINT fk_accueil_creneau FOREIGN KEY (id_creneau) REFERENCES CRENEAU(id_creneau)
    CONSTRAINT fk_accueil_salle FOREIGN KEY (nom_salle) REFERENCES SALLE(nom_salle),
);

CREATE TABLE PARTICIPER (
    nom_groupe        VARCHAR(50) NOT NULL,
    id_creneau         NUMERIC NOT NULL,
    CONSTRAINT fk_participer_groupe  FOREIGN KEY (nom_groupe) REFERENCES GROUPE(nom_groupe),
    CONSTRAINT fk_participer_creneau FOREIGN KEY (id_creneau) REFERENCES CRENEAU(id_creneau)
);

CREATE TABLE ENSEIGNER (
    id_professeur     NUMERIC NOT NULL,
    id_creneau         NUMERIC NOT NULL,
    CONSTRAINT fk_enseigner_professeur FOREIGN KEY (id_professeur) REFERENCES PROFESSEUR(id_professeur),
    CONSTRAINT fk_enseigner_creneau    FOREIGN KEY (id_creneau) REFERENCES CRENEAU(id_creneau)
);


-- grant all on "BD116"."ACCUEIL" to "BD127" ;
-- grant all on "BD116"."BATIMENT" to "BD127" ;
-- grant all on "BD116"."CRENEAU" to "BD127" ;
-- grant all on "BD116"."DEPARTEMENT" to "BD127" ;
-- grant all on "BD116"."ENSEIGNER" to "BD127" ;
-- grant all on "BD116"."GROUPE" to "BD127" ;
-- grant all on "BD116"."PARTICIPER" to "BD127" ;
-- grant all on "BD116"."PROFESSEUR" to "BD127" ;
-- grant all on "BD116"."SALLE" to "BD127" ;