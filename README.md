# SAEExploitationBD

## Présentation du sujet :

Membres du groupe : 
 - Francois De Saint Palais
 - Clement Denamiel
 - Jonathan Guil
 - Samuel Lacam
 

Dans cette SAE, nous devons interpréter les données présentent dans un fichier d'emploi du temps au format `.ics` afin de les insérer dans un fichier `.csv` à l'aide d'un script en Python.

Il faut ensuite ajouter ces données dans une base de données préalablement créée avec un script créé en python. Avec cette

Avec cette base de données, il faut ensuite utiliser [grafana](https://grafana.com/) pour visualiser les données pour répondre à plusieurs situations

Cette SAE est supervisée par les enseignants suivants : \
[Mr Palosse](mathieu.palosse@iut-rodez.fr) \
[Mr Wehrle](laurent.wehrle@iut-rodez.fr) \
[Mr Castella](fabien.castella@iut-rodez.fr)



## Les différentes parties : 
[PARTIE 1](#partie-1--analyse-des-données-et-script-de-lecture) \
[PARTIE 2](#partie-2--modélisation-de-la-base-de-données) \
[PARTIE 3](#partie-3--création-de-la-base-de-données) \
[PARTIE 4](#partie-4--insertion-des-données) \
[PARTIE 5](#partie-5--exploitation-des-données) \
[PARTIE 6](#partie-6--fichiers-fournis) 
\
[STRUCTURE DU PROJET](#structure-du-projet-)

### Partie 1 : analyse des données et script de lecture
Extraire les données du fichier iCalendar dans un fichier csv avec un script python.
    
    les données à extraire sont :
        - la date de début
        - la date de fin
        - l'intitulé
        - la / les salles affectées
        - le / les professeurs affectés
        - le / le groupes étudiants
    
---

### Partie 2 : modélisation de la base de données
Établir le modèle conceptuel et le schéma relationnel de la base de données à l'aide de .csv
    
    informations devant être disponibles : 
        - le batiment dans lequel la salle se trouve
        - Si la salle est informatique ou non
        - Associer un groupe à un département et une année

---

### Partie 3 : création de la base de données
Écrire un scrip en sql de création de la base de données à partir du schéma relationnel

---

### Partie 4 : insertion des données
Compléter le script python pour que le fichier .csv soit lu et écrive un script d'insertion des données sur la base

---

### Partie 5 : Exploitation des données
Requêtes Sql et visualisation avec [grafana](https://grafana.com/), **systématiquement entre deux dates données**

    On doit pouvoir voir : 
        - Durée d'occupation des salles
        - Durée d'occupation des salles pour un depaetement donné
        - Durée d'occupation des salles par département
        - Moyenne et dispersion de la durée d'occupation
          d'une salle par jour de la semaine
        - Charge (durée totale d'enseignements) moyenne
          hebdomadaire pour un groupe donné
        - Pour un département donné, proportion d'occupation de 
          salles informatiques

    Prolongement possibles : 
        - toute autre requete et visualisation que l'on juge pertinente
       
---

### Partie 6 : Fichiers fournis
  - `ADECal.ics` : le fichier d'emploi du temps à exploiter 

  - `enseignants.txt` : tous les prenoms et noms des enseignants

  - `groupes.txt` : tous les groupes (noms, département, année)
  
  - `salles.txt` : toutes les salles (nom, batiment, informatique?) 

---



## Structure du projet : 
- **AIDE**
  - Contient des fichiers d'aide à python et à git.
- **CODE**
  - `main.py` : fichier récupére les données du fichier \
    `.ics` dans un fichier `.csv`
  - `creation_sql.py` : fichier créant le script sql \
    pour inséerer les données issue des classes python
  - **CLASSES** *Contient les classes python (**PAS DEMANDÉ**)*
    - `Bloc.py` : classe Bloc \
      À partir d'un bloc d'évenement du `.ics` créé la valeur pour 
      les tables creneau, salle, professeur et groupe.
    - `Calendrier.py` : classe calendrier \
      Permet de récupérer les données du fichier `.ics`
    - Tables :
      - `Batiment.py` : classe Batiment \
        Contient les données de la table batiment
      - `Creneau.py` : classe Creneau \
        Contient les données de la table creneau
      - `Departement.py` : classe Departement \
        contient les informations de la table  département
      - `Groupe.py` : classe Groupe \
        contient les informations de la table groupe
      - `Professeur.py` : classe Professeur \
        contient les informations de la table professeur
      - `Salle.py` : classe Salle \
        contient les informations de la table salle
    - Associations :
      - `Accueil.py` : classe Accueil \
        Contient les données de l'association entre les salles et les créneaux
      - `Enseigner.py` : classe Enseigner \
        contient les informations de l'association entre les professeurs et les groupes
      - `Participer.py` : classe Participer \
        contient les informations de l'association entre les groupes et les créneaux

- **DATA** ***(fichiers fournis)***

  - `ADECal.ics` : le fichier d'emploi du temps à exploiter 

  - `enseignants.txt` : tous les prenoms et noms des enseignants

  - `groupes.txt` : tous les groupes (noms, département, année)
  
  - `salles.txt` : toutes les salles (nom, batiment, informatique?) 

- **DEBUG** *Pour tester sur un ensemble limité de données*

  -  `les_creneaux.csv`

- **RESULAT** *Pour tester sur toutes les données*

  -  `les_creneaux.csv`

- **SCRIPT_MYSQL**  
  - **CSV_TO_MYSQL**
    - `converter.py` : fichier python pour convertir les données du fichier csv en scripts d'inseration de données pour MySQL
  - `creationBD_MySQL.sql` : script de création de la base de données avec MySQL

- **SQL_SCRIPT_ORACLE**

  - `create_insertion_file.py` : fichier python pour insérer les données
  
  - `creationBD.sql` : script de création de la base de données



