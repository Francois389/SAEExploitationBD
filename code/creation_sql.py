from classes.Calendrier import Calendrier
from classes.Bloc import Bloc 
from classes.Creneau import Creneau
from classes.Groupe import Groupe
from classes.Professeur import Professeur 
from classes.Salle import Salle 
from classes.Departement import Departement
from classes.Batiment import Batiment 

VARCHAR_70 = 70
VARCHAR_50 = 50

DROP_ALL_TABLE = """
--DROP TABLE DEPARTEMENT;
--DROP TABLE CRENEAU;
--DROP TABLE PROFESSEUR;
--DROP TABLE BATIMENT;
--DROP TABLE GROUPE;
--DROP TABLE SALLE;
"""

DEPARTEMENT_CREATION_TEMPLATE = f"""
CREATE TABLE departement (
    nom_departement VARCHAR({VARCHAR_70}) NOT NULL
     CONSTRAINT pk_departement PRIMARY KEY,

    annee_etude     NUMERIC NOT NULL
);
"""

CRENEAU_CREATION_TEMPLATE = f"""
CREATE TABLE creneau (
    id_creneau      VARCHAR({VARCHAR_70}) NOT NULL
     CONSTRAINT pk_departement PRIMARY KEY,

    intitule        VARCHAR({VARCHAR_70}) NOT NULL,
    heure_debut     DATE NOT NULL,
    heure_fin       DATE NOT NULL
);

"""

PROFESSEUR_CREATE_TEMPLATE = f"""
CREATE TABLE professeur (
    id_professeur     NUMERIC NOT NULL             
     CONSTRAINT pk_professeur PRIMARY KEY,
    
    nom_professeur     VARCHAR({VARCHAR_50}) NOT NULL,
    prenom_professeur  VARCHAR({VARCHAR_50}) NOT NULL);
"""

BATIMENT_CREATE_TEMPLATE = f"""
CREATE TABLE batiment (
    nom_batiment      VARCHAR({VARCHAR_50}) NOT NULL    
      CONSTRAINT pk_batiment PRIMARY KEY);
"""

GROUPE_CREATE_TEMPLATE = f"""
CREATE TABLE groupe (
    nom_groupe        VARCHAR({VARCHAR_50}) NOT NULL    
      CONSTRAINT pk_groupe PRIMARY KEY,

    annee_etude        NUMERIC(1)  NOT NULL, 
    nom_departement    VARCHAR({VARCHAR_50}) NOT NULL,
    CONSTRAINT fk_groupe_departement REFERENCES departement(nom_departement));
"""

SALLE_CREATE_TEMPLATE = f"""
CREATE TABLE salle (
    nom_salle         VARCHAR({VARCHAR_50}) NOT NULL    
      CONSTRAINT pk_salle PRIMARY KEY,
    est_infomatique    VARCHAR(3) NOT NULL     
      CONSTRAINT fk_salle_infomatique CHECK (est_infomatique IN ('oui', 'non')),

    id_creneau         NUMERIC NOT NULL,
    nom_batiment       VARCHAR(50) NOT NULL,

    CONSTRAINT fk_salle_creneau REFERENCES CRENEAU(id_creneau),
    CONSTRAINT fk_salle_batiment REFERENCES BATIMENT(nom_batiment));
"""

calendrier: Calendrier = Calendrier("data/ADECal.ics")

calendrier.get_data()

liste = calendrier.get_events()


data_a_inserer = {
    "departement" : [],
    "creneau"     : [],
    "professeur"  : [],
    "batiment"    : [],
    "groupe"      : [],
    "salle"       : [],
}




for event in liste:
    data_a_inserer["creneau"].append(event.get_creneau())
    data_a_inserer["professeur"].append(event.get_professeurs())
    data_a_inserer["groupe"].append(event.get_groupes())
    data_a_inserer["salle"].append(event.get_salle())

print(len(data_a_inserer["professeur"]))